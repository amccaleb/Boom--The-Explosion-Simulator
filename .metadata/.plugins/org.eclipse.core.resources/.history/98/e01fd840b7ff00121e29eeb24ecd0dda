/**
 * Alexander McCaleb & Jonah Nobleza
 * CMPS 179 - Summer 2013
 * Boom -- The Explosion Simulator
 *
 * CHBathtubic.js
 *
 * The fake chemical: Bathtubic, in Boom!
 *
 * Bathtubic has the following properties:
 * Sensitivity: 	4
 * Stability: 		8
 * Visual Appeal: 	6
 * Performance:		9
 * Strength:		7
 * Velocity:		4
 *
 */

/**
 * Default Constructor
 */
var CHBathtubic = function() {

	// Create geometry for this chemical
	// radiusAtTop, radiusAtBottom, height, segmentsAroundRadius, segmentsAlongHeight,
	this.geometry = new THREE.CylinderGeometry(50, 100, 100, 20, 4);

	// Load textures for this chemical
	var noiseTexture = new THREE.ImageUtils.loadTexture('images/cloud.png');
	noiseTexture.wrapS = noiseTexture.wrapT = THREE.RepeatWrapping;

	var waterTexture = new THREE.ImageUtils.loadTexture('images/dirtywater.jpg');
	waterTexture.wrapS = waterTexture.wrapT = THREE.RepeatWrapping;

	// Initialize the water effect shaders
	this.uniforms = {
		baseTexture : {
			type : "t",
			value : waterTexture
		},
		baseSpeed : {
			type : "f",
			value : 0.1
		},
		noiseTexture : {
			type : "t",
			value : noiseTexture
		},
		noiseScale : {
			type : "f",
			value : 0.4
		},
		alpha : {
			type : "f",
			value : 1.0
		},
		time : {
			type : "f",
			value : 1.0
		}
	};

	this.material = new THREE.ShaderMaterial({
		uniforms : this.uniforms,
		vertexShader : loadFile('shaders/WaterEffect/WaterEffect.vert'),
		fragmentShader : loadFile('shaders/WaterEffect/WaterEffect.frag')
	});
	this.material.side = THREE.DoubleSide;

	this.object = new THREE.Mesh(this.geometry, this.material);
};
